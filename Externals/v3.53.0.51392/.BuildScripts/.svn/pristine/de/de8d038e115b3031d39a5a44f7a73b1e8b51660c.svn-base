<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Reference source code, if it exists, and the configuration is -source; 
  Otherwise, reference External binary files -->
  <Choose>
	<When Condition="'$(ReferenceSourceCode)' == 'true' And Exists('..\LiteMotionControl')">
	  <ItemGroup>
	    <!-- Reference the project from source code in the solution -->
		<ProjectReference Include="..\LiteMotionControl\LiteMotionControl.vbproj">
		  <Project>{9a15ae6d-a705-4b64-afa9-5d66975d0882}</Project>
		  <Name>LiteMotionControl</Name>
		</ProjectReference>	  
	  </ItemGroup>
	</When>
	<When Condition="Exists('Externals\DGTS_WaferMap\')">
	  <ItemGroup> <!-- Use the binary from the DGTS_WaferMap external of the project -->
	    <Reference Include="LiteMotionControl"> 
		  <HintPath>Externals\DGTS_WaferMap\$(BinSubfolder)\LiteMotionControl.exe</HintPath>
	    </Reference>	
	  </ItemGroup>
	</When>		
	<Otherwise>
	  <ItemGroup>
		<Reference Include="LiteMotionControl">	      
	      <HintPath>Externals\LiteMotionControl\$(BinSubfolder)\LiteMotionControl.exe</HintPath>
		</Reference>	  
	  </ItemGroup>
    </Otherwise>
  </Choose>  
</Project>