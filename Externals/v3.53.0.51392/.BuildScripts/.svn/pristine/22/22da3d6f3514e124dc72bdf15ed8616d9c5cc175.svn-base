<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Choose>
    <!-- Note:  If more than one When element evaluates to true, only the first one is used -->
    <When Condition="'$(ReferenceSourceCode)' == 'true' And Exists('..\LiteRealTimeAligner')">
      <ItemGroup>
        <!-- Use the project source code -->
        <ProjectReference Include="..\LiteRealTimeAligner\LiteRealTimeAligner.vbproj">
          <Project>{e8e705e3-4ef2-4bec-85f5-7df5b0d38fe2}</Project>
          <Name>LiteRealTimeAligner</Name>
        </ProjectReference>
      </ItemGroup>
    </When>
    <Otherwise>
      <ItemGroup>
        <!-- Use the binary from the External -->
        <Reference Include="LiteRealTimeAligner">
          <ExecutableExtension>.exe</ExecutableExtension>
          <HintPath>Externals\LiteRealTimeAligner\$(BinSubfolder)\LiteRealTimeAligner.exe</HintPath>
        </Reference>
      </ItemGroup>
    </Otherwise>
  </Choose>
</Project>